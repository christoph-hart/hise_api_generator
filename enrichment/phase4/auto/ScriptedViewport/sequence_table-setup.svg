<svg xmlns="http://www.w3.org/2000/svg" width="760" height="480" viewBox="0 0 760 480">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#CCCCCC"/>
    </marker>
    <marker id="arrow-loop" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#3F6E6E"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="760" height="480" fill="#333333"/>

  <!-- Title -->
  <text x="380" y="32" text-anchor="middle" font-family="Lato, sans-serif" font-size="16" font-weight="bold" fill="#CCCCCC">Table Mode Setup Sequence</text>

  <!-- onInit phase zone -->
  <rect x="12" y="48" width="736" height="270" rx="6" fill="#4E8E35" fill-opacity="0.05" stroke="#4E8E35" stroke-opacity="0.2" stroke-width="1"/>
  <text x="28" y="70" font-family="Lato, sans-serif" font-size="12" fill="#4E8E35" opacity="0.7">onInit</text>

  <!-- Timeline spine (onInit portion) -->
  <line x1="60" y1="92" x2="60" y2="298" stroke="#90FFB1" stroke-width="2"/>

  <!-- Step 1: setTableMode -->
  <circle cx="60" cy="112" r="14" fill="#333333" stroke="#90FFB1" stroke-width="2"/>
  <text x="60" y="117" text-anchor="middle" font-family="Lato, sans-serif" font-size="13" font-weight="bold" fill="#90FFB1">1</text>
  <rect x="90" y="90" width="640" height="46" rx="6" fill="#282828" stroke="rgba(0,0,0,0.5)" stroke-width="1"/>
  <text x="106" y="110" font-family="Consolas, 'Courier New', monospace" font-size="13" fill="#CCCCCC">setTableMode( metadata )</text>
  <text x="106" y="128" font-family="Lato, sans-serif" font-size="12" fill="#808080">Activates table mode, configures RowHeight, Sortable, MultiColumnMode, etc.</text>

  <!-- Step 2: setTableColumns -->
  <circle cx="60" cy="182" r="14" fill="#333333" stroke="#90FFB1" stroke-width="2"/>
  <text x="60" y="187" text-anchor="middle" font-family="Lato, sans-serif" font-size="13" font-weight="bold" fill="#90FFB1">2</text>
  <rect x="90" y="160" width="640" height="46" rx="6" fill="#282828" stroke="rgba(0,0,0,0.5)" stroke-width="1"/>
  <text x="106" y="180" font-family="Consolas, 'Courier New', monospace" font-size="13" fill="#CCCCCC">setTableColumns( columnMetadata )</text>
  <text x="106" y="198" font-family="Lato, sans-serif" font-size="12" fill="#808080">Defines column structure: ID, Type (Text/Button/Slider/ComboBox), Width, etc.</text>

  <!-- Step 3: setTableCallback -->
  <circle cx="60" cy="252" r="14" fill="#333333" stroke="#90FFB1" stroke-width="2"/>
  <text x="60" y="257" text-anchor="middle" font-family="Lato, sans-serif" font-size="13" font-weight="bold" fill="#90FFB1">3</text>
  <rect x="90" y="230" width="640" height="46" rx="6" fill="#282828" stroke="rgba(0,0,0,0.5)" stroke-width="1"/>
  <text x="106" y="250" font-family="Consolas, 'Courier New', monospace" font-size="13" fill="#CCCCCC">setTableCallback( callbackFunction )</text>
  <text x="106" y="268" font-family="Lato, sans-serif" font-size="12" fill="#808080">Registers inline function receiving {Type, rowIndex, columnID, value} events.</text>

  <!-- Phase boundary -->
  <line x1="24" y1="330" x2="736" y2="330" stroke="#808080" stroke-width="1" stroke-dasharray="6,4"/>
  <text x="380" y="348" text-anchor="middle" font-family="Lato, sans-serif" font-size="12" fill="#808080">runtime -- call at any time, as often as needed</text>

  <!-- Runtime phase zone -->
  <rect x="12" y="358" width="736" height="70" rx="6" fill="#3F6E6E" fill-opacity="0.05" stroke="#3F6E6E" stroke-opacity="0.2" stroke-width="1"/>

  <!-- Timeline spine (runtime portion) -->
  <line x1="60" y1="330" x2="60" y2="393" stroke="#3F6E6E" stroke-width="2"/>

  <!-- Step 4: setTableRowData -->
  <circle cx="60" cy="393" r="14" fill="#333333" stroke="#3F6E6E" stroke-width="2"/>
  <text x="60" y="398" text-anchor="middle" font-family="Lato, sans-serif" font-size="13" font-weight="bold" fill="#3F6E6E">4</text>
  <rect x="90" y="371" width="620" height="46" rx="6" fill="#282828" stroke="rgba(0,0,0,0.5)" stroke-width="1"/>
  <text x="106" y="391" font-family="Consolas, 'Courier New', monospace" font-size="13" fill="#CCCCCC">setTableRowData( rowArray )</text>
  <text x="106" y="409" font-family="Lato, sans-serif" font-size="12" fill="#808080">Populates or refreshes rows. Data is cloned internally. Auto-re-sorts if active.</text>

  <!-- Repeat/loop arrow on step 4 -->
  <path d="M710,385 Q740,394 710,407" fill="none" stroke="#3F6E6E" stroke-width="1.5" marker-end="url(#arrow-loop)"/>

  <!-- Legend -->
  <rect x="12" y="440" width="736" height="32" rx="6" fill="#282828" stroke="rgba(0,0,0,0.5)" stroke-width="1"/>
  <!-- onInit color swatch -->
  <rect x="28" y="450" width="12" height="12" rx="2" fill="#4E8E35" fill-opacity="0.3" stroke="#4E8E35" stroke-opacity="0.5" stroke-width="0.5"/>
  <text x="48" y="460" font-family="Lato, sans-serif" font-size="11" fill="#808080">onInit only</text>
  <!-- Runtime color swatch -->
  <rect x="140" y="450" width="12" height="12" rx="2" fill="#3F6E6E" fill-opacity="0.3" stroke="#3F6E6E" stroke-opacity="0.5" stroke-width="0.5"/>
  <text x="160" y="460" font-family="Lato, sans-serif" font-size="11" fill="#808080">Runtime</text>
  <!-- Loop arrow legend -->
  <path d="M262,450 Q274,456 262,462" fill="none" stroke="#3F6E6E" stroke-width="1" marker-end="url(#arrow-loop)"/>
  <text x="282" y="460" font-family="Lato, sans-serif" font-size="11" fill="#808080">Repeatable</text>
</svg>
